#!/bin/sh

xrandr_output="$(xrandr)"
connected_monitors=$(echo "$xrandr_output" | grep '\bconnected\b' | cut --delimiter=' ' --fields=1)
disconnected_monitors=$(echo "$xrandr_output" | grep '\bdisconnected\b' | cut --delimiter=' ' --fields=1)

check_connected() {
  echo "$connected_monitors" | grep --silent "\\b$1\\b"
}

if check_connected 'DP1'; then
  xrandr --output eDP1 --mode 1600x900 --output DP1 --auto --left-of eDP1
elif check_connected 'HDMI1'; then
  xrandr --output eDP1 --mode 1600x900 --output HDMI1 --auto --left-of eDP1
else
  xrandr --output eDP1 --mode 1920x1080
fi

for disconnected_monitor in $disconnected_monitors; do
  xrandr --output "$disconnected_monitor" --off
done

init-polybar
init-background
